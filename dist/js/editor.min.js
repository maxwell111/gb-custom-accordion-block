(()=>{"use strict";const e=wp.blocks;function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const a=wp.element,r=wp.components,o=wp.blockEditor,c=function(e){return(0,a.createElement)(o.MediaUpload,{onSelect:function(t){e.onMediaSelected(t.url)},type:"image",multiple:!1,value:e.mediaUrl,render:function(t){return t.open,(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"image-upload"},e.mediaUrl?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"image-upload-holder"},(0,a.createElement)("img",{src:e.mediaUrl}),(0,a.createElement)(o.MediaUploadCheck,null,(0,a.createElement)(r.Button,{variant:"primary",onClick:function(){e.onMediaSelected(null)}},"Remove Image")))):(0,a.createElement)(o.MediaPlaceholder,{labels:{title:"Select an image"},icon:"format-image",onSelect:function(t){e.onMediaSelected(t.url)},accept:"image/*",allowedTypes:["image"]})))}})};(0,e.registerBlockType)("gb-custom-accordion-plugin/gb-custom-accordion-block",{title:"GB Custom Accordion block",description:"Custom Gutenberg plugin with accordion block",category:"text",icon:"list-view",attributes:{blockTitle:{type:"string"},firstItemExpanded:{type:"boolean",default:!0},items:{type:"array",default:[]}},edit:function(e){var t,i=e.setAttributes,l=e.attributes,m=l.items,d=l.blockTitle,u=l.firstItemExpanded,s=function(e,t,a){var r=n(m);r[a][e]=t,i({items:r})};return m.length&&(t=m.map((function(e,t){return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"accordion-editor-item"},(0,a.createElement)("div",{className:"accordion-editor-item-title"},(0,a.createElement)("h4",{className:"accordion-editor-item-heading"},(0,a.createElement)(o.RichText,{placeholder:"Accordion item heading",tagName:"span",value:e.heading,onChange:function(e){return s("heading",e,t)}})),(0,a.createElement)("span",{className:"title-icon ".concat(e.expanded?"icon-minus":"icon-plus"),onClick:function(){return function(e){var t=n(m);t[e].expanded=!t[e].expanded,i({items:t})}(t)}})),(0,a.createElement)("div",{className:"accordion-editor-item-content ".concat(e.expanded?"active":"")},(0,a.createElement)("div",{className:"content-left"},(0,a.createElement)("p",null,(0,a.createElement)(o.RichText,{placeholder:"Accordion item content",value:e.content,onChange:function(e){return s("content",e,t)}}))),(0,a.createElement)("div",{className:"content-right"},(0,a.createElement)(c,{mediaUrl:e.image,onMediaSelected:function(e){return function(e,t){var a=n(m);a[t].image=e,i({items:a})}(e,t)}})))),(0,a.createElement)("div",{className:"accordion-editor-button-wrap align-right"},(0,a.createElement)(r.Button,{variant:"secondary",isLarge:!0,icon:"remove",onClick:function(){return function(e){var t=n(m);t.splice(e,1),i({items:t})}(t)},className:"accordion-editor-item accordion-editor-button"},"Remove Item")))}))),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(o.InspectorControls,null,(0,a.createElement)(r.PanelBody,{title:"Accordion block settings"},(0,a.createElement)(r.PanelRow,null,(0,a.createElement)(r.ToggleControl,{checked:u,onChange:function(e){i({firstItemExpanded:e})},label:"Expand first item"})))),(0,a.createElement)("div",{className:"accordion-editor"},(0,a.createElement)(o.RichText,{value:d,onChange:function(e){return function(e){i({blockTitle:e})}(e)},tagName:"h2",className:"accordion-editor-title",placeholder:"Accordion block title"}),(0,a.createElement)("div",{className:"accordion-editor-wrap"},(0,a.createElement)("div",{className:"accordion-editor-items"},t,(0,a.createElement)("div",{className:"accordion-editor-button-wrap"},(0,a.createElement)(r.Button,{variant:"primary",isLarge:!0,className:"accordion-editor-button button-wfull ",icon:"insert",onClick:function(){var e=n(m);e.push({heading:"",content:"",image:"",expanded:!1}),i({items:e})}.bind(void 0)},"Add accordion item"))))))},save:function(){return null}})})();